import{r as m,V as h,b,j as o,k as w}from"./index-Bc3O-PEo.js";import{G as y}from"./ground-CY9CAd_c.js";const P=({motionMapper:l,maxPoints:n=1e3,pointSize:g=.2,maxDim:a=2,color:j="white"})=>{const s=Math.max(1,Math.floor(Math.cbrt(n))),x=Math.pow(s,3),d=m.useRef(null),i=m.useMemo(()=>new h,[]),c=m.useMemo(()=>new h,[]);return m.useEffect(()=>{const u=d.current.geometry.attributes.position,r=a/s;let f=0;for(let e=0;e<s;e++)for(let t=0;t<s;t++)for(let p=0;p<s;p++)f=e*(s*s)+t*s+p,u.setXYZ(f,-a/2+e*r,-a/2+t*r,-a/2+p*r);u.needsUpdate=!0}),b(({clock:u},r)=>{const f=u.getElapsedTime(),e=d.current.geometry.attributes.position;for(let t=0;t<x;t++)i.x=e.getX(t),i.y=e.getY(t),i.z=e.getZ(t),l.map(i,r,f,c),e.setXYZ(t,c.x,c.y,c.z);e.needsUpdate=!0}),o.jsxs("points",{ref:d,children:[o.jsx("bufferGeometry",{children:o.jsx("bufferAttribute",{attach:"attributes-position",array:new Float32Array(x*3),count:x,itemSize:3})}),o.jsx("pointsMaterial",{attach:"material",color:j,size:g})]})},{useParams:M,useActions:A,usePresets:B}=w({default:{maxPoints:1e3,pointSize:.2,maxDim:2,color:"white"}}),E=({motionMapper:l})=>{const n=M();return o.jsxs(o.Fragment,{children:[o.jsx(P,{motionMapper:l,...n}),o.jsx(y,{position:new h(0,0,-1.5*n.maxDim)})]})};export{E as default,A as useActions,M as useParams,B as usePresets};
