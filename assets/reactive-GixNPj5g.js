import{c as w,r as m,M as C,d as E,b as R,j as e,g as T,h as A,i as I,T as f,V as y,k as B}from"./index-Bc3O-PEo.js";import{G}from"./ground-CY9CAd_c.js";const O=({coordinateMapper:c,radius:r=2,nPoints:t=800,cubeSideLength:l=.05})=>{const g=w(),s=m.useRef(null),j=m.useMemo(()=>new C,[]),M=E.getPalette(g).buildLut();return m.useEffect(()=>{for(let a=0;a<t;a++)s.current.setColorAt(a,M.getColor(a/t));s.current.instanceColor.needsUpdate=!0},[M,s,t]),R(({clock:a})=>{const P=a.getElapsedTime();let h,o,i,d,p,x,n;for(let u=0;u<t;u++)h=u+.5,o=Math.acos(1-2*h/t)%Math.PI,i=Math.PI*(1+Math.sqrt(5))*h%f,d=Math.cos(i)*Math.sin(o),p=Math.sin(i)*Math.sin(o),x=Math.cos(o),n=r+.25*r*c.map(I.POLAR,i/f,o/Math.PI,0,P),s.current.setMatrixAt(u,j.setPosition(d*n,p*n,x*n));s.current.instanceMatrix.needsUpdate=!0}),e.jsxs("instancedMesh",{ref:s,castShadow:!0,receiveShadow:!0,args:[new T,new A,t],children:[e.jsx("boxGeometry",{attach:"geometry",args:[l,l,l,1]}),e.jsx("meshBasicMaterial",{attach:"material",color:"white",toneMapped:!1})]})},{useParams:S,useActions:k,usePresets:F}=B({default:{radius:2,nPoints:800,cubeSideLength:.05}}),U=({coordinateMapper:c})=>{const r=S();return e.jsxs(e.Fragment,{children:[e.jsx(O,{coordinateMapper:c,...r}),e.jsx(G,{position:new y(0,0,-r.radius*(1+.25*c.amplitude))})]})};export{U as default,k as useActions,S as useParams,F as usePresets};
