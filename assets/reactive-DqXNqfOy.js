import{r as f,M as S,c as w,d as A,b as T,j as s,g as I,h as Y,i as b,k as z,V as B}from"./index-Bc3O-PEo.js";import{G as O}from"./ground-CY9CAd_c.js";const R=({coordinateMapper:i,nGridRows:e=100,nGridCols:t=100,cubeSideLength:o=.025,cubeSpacingScalar:h=5})=>{const n=f.useRef(null),M=f.useMemo(()=>new S,[]),E=w(),g=A.getPalette(E).buildLut();return f.useEffect(()=>{if(!g)return;const x=Math.hypot(.5,.5);let l,u,m,c;for(let a=0;a<e;a++)for(let r=0;r<t;r++)l=a*t+r,u=a/(e-1),m=r/(t-1),c=Math.hypot(u-.5,m-.5)/x,n.current.setColorAt(l,g.getColor(c));n.current.instanceColor.needsUpdate=!0}),T(({clock:x})=>{const l=x.getElapsedTime(),u=e*h*o,m=t*h*o;let c,a,r,j,P,y;for(let d=0;d<e;d++)for(let p=0;p<t;p++)c=d*t+p,a=d/(e-1),r=p/(t-1),y=i.map(b.CARTESIAN_2D,a,r,0,l),j=u*(a-.5),P=m*(r-.5),M.setPosition(j,P,y),n.current.setMatrixAt(c,M);n.current.instanceMatrix.needsUpdate=!0}),s.jsxs("instancedMesh",{ref:n,castShadow:!0,receiveShadow:!0,args:[new I,new Y,e*t],children:[s.jsx("boxGeometry",{attach:"geometry",args:[o,o,o,1]}),s.jsx("meshPhongMaterial",{attach:"material",color:"white",toneMapped:!1})]})},{useParams:V,useActions:D,usePresets:F}=z({default:{nGridCols:100,nGridRows:100,cubeSideLength:.025,cubeSpacingScalar:5},bands:{nGridRows:5,nGridCols:200,cubeSideLength:.025,cubeSpacingScalar:1}}),G=({coordinateMapper:i})=>{const e=V();return s.jsxs(s.Fragment,{children:[s.jsx(R,{coordinateMapper:i,...e}),s.jsx(O,{position:new B(0,0,-2.5*i.amplitude)})]})};export{G as default,D as useActions,V as useParams,F as usePresets};
