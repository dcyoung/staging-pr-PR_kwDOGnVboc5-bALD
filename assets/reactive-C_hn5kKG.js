import{r as s,aa as M,V as _,c as D,d as F,j as e,P as L,b as z,i as B}from"./index-Bc3O-PEo.js";function N(u,r){const h=u+"Geometry";return s.forwardRef(({args:i,children:a,...j},d)=>{const o=s.useRef(null);return s.useImperativeHandle(d,()=>o.current),s.useLayoutEffect(()=>void(r==null?void 0:r(o.current))),s.createElement("mesh",M({ref:o},j),s.createElement(h,{attach:"geometry",args:i}),a)})}const p=N("plane"),O=({coordinateMapper:u,ribbonWidth:r=1,ribbonHeight:h=10,ribbonWidthSegments:i=1,ribbonHeightSegments:a=64,zScale:j=2})=>{const d=[s.useRef(null),s.useRef(null),s.useRef(null),s.useRef(null),s.useRef(null)],o=d.length,w=r*o/2,n=h/2,T=Array.from({length:o}).map((m,l)=>new _(w-r*l-r/2,0,0)),A=D(),E=F.getPalette(A),f=s.useMemo(()=>e.jsx("meshStandardMaterial",{color:E.colorsHex[Math.floor(E.nColors/2)],roughness:.25,metalness:.25,side:L,flatShading:!1}),[E]);z(({clock:m})=>{const l=m.getElapsedTime();let x,c,R,g,v,S,P;d.forEach((y,I)=>{if(!y.current)return;const C=y.current.geometry.attributes.position;for(c=0;c<=a;c++)for(P=1-Math.abs(c-a/2)/(a/2),x=0;x<=i;x++)g=(I+.5)/o,v=(c+.5)/a,R=c*(i+1)+x,S=j*u.map(B.CARTESIAN_2D,g,v,0,l),C.setZ(R,S*P);C.needsUpdate=!0})});const t=250;return e.jsxs(e.Fragment,{children:[e.jsx("ambientLight",{}),e.jsx("pointLight",{position:[2,2,5],intensity:150}),e.jsx(p,{args:[t/2,t,1,1],position:[w+t/4,0,0],castShadow:!0,receiveShadow:!0,children:f}),e.jsx(p,{args:[t/2,t,1,1],position:[-w-t/4,0,0],castShadow:!0,receiveShadow:!0,children:f}),e.jsx(p,{args:[t/4,t/2-n,1,1],position:[0,-n-(t/2-n)/2,0],castShadow:!0,receiveShadow:!0,children:f}),e.jsx(p,{args:[t/4,t/2-n,1,1],position:[0,n+(t/2-n)/2,0],castShadow:!0,receiveShadow:!0,children:f}),d.map((m,l)=>e.jsx(p,{args:[r,h,i,a],ref:m,position:T[l],castShadow:!0,receiveShadow:!0,children:f},`ribbon-plane-${l}`))]})},Y=({coordinateMapper:u})=>e.jsx(e.Fragment,{children:e.jsx(O,{coordinateMapper:u})});export{Y as default};
