import{r as A,M as I,c as _,d as B,b as G,j as n,g as N,h as U,H as b,i as w,V as F,k as O}from"./index-Bc3O-PEo.js";import{G as v}from"./ground-CY9CAd_c.js";const z=({coordinateMapper:M,nPerSide:e=10,cubeSideLength:i=.5,cubeSpacingScalar:d=.1,volume:j=!0})=>{const u=A.useRef(null),m=A.useMemo(()=>new I,[]),y=j?w.CARTESIAN_3D:w.CARTESIAN_CUBE_FACES,R=_(),T=B.getPalette(R).buildLut();return A.useEffect(()=>{let p,c,t,a,s;for(let o=0;o<e;o++)for(let r=0;r<e;r++)for(let l=0;l<e;l++)p=o*e**2+r*e+l,c=o/(e-1),t=r/(e-1),a=l/(e-1),c==0||c==1?s=Math.hypot(t-.5,a-.5)/b:t==0||t==1?s=Math.hypot(c-.5,a-.5)/b:a==0||a==1?s=Math.hypot(c-.5,t-.5)/b:s=0,u.current.setColorAt(p,T.getColor(s));u.current.instanceColor.needsUpdate=!0}),G(({clock:p})=>{const c=p.getElapsedTime(),t=e*(1+d)*i;let a,s,o,r,l,E,g,f;for(let h=0;h<e;h++)for(let x=0;x<e;x++)for(let C=0;C<e;C++)a=h*e**2+x*e+C,s=h/(e-1),o=x/(e-1),r=C/(e-1),l=t*(s-.5),E=t*(o-.5),g=t*(r-.5),m.setPosition(l,E,g),f=.1+.9*M.map(y,s,o,r,c),m.elements[0]=f,m.elements[5]=f,m.elements[10]=f,u.current.setMatrixAt(a,m);u.current.instanceMatrix.needsUpdate=!0}),n.jsxs("instancedMesh",{ref:u,castShadow:!0,receiveShadow:!0,args:[new N,new U,e**3],children:[n.jsx("boxGeometry",{attach:"geometry",args:[i,i,i,1]}),n.jsx("meshBasicMaterial",{attach:"material",color:"white",toneMapped:!1})]})},{useParams:D,useActions:L,usePresets:V}=O({default:{nPerSide:10,cubeSideLength:.5,cubeSpacingScalar:.1,volume:!0}}),X=({coordinateMapper:M})=>{const e=D();return n.jsxs(n.Fragment,{children:[n.jsx(z,{coordinateMapper:M,...e}),n.jsx(v,{position:new F(0,0,-.75*e.nPerSide*(1+e.cubeSpacingScalar)*e.cubeSideLength)})]})};export{X as default,L as useActions,D as useParams,V as usePresets};
